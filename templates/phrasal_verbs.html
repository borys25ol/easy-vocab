<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phrasal Verbs Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/static/js/shared.js"></script>
    <script src="/static/js/card-renderer.js"></script>
    <style>
        /* Shared animations and card states */
        .details-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.3s;
            opacity: 0;
        }

        .card-active .details-container {
            max-height: 800px;
            opacity: 1;
            margin-top: 1rem;
        }

        .blur-text {
            filter: blur(12px);
            transition: filter 0.3s;
        }

        .card-active .blur-text {
            filter: blur(0);
        }

        .chevron {
            transition: transform 0.3s ease;
        }

        .card-active .chevron {
            transform: rotate(180deg);
        }

        /* Level border styles */
        .lvl-a1 {
            border-left: 8px solid #22c55e !important;
        }

        .lvl-a2 {
            border-left: 8px solid #eab308 !important;
        }

        .lvl-b1 {
            border-left: 8px solid #0ea5e9 !important;
        }

        .lvl-b2 {
            border-left: 8px solid #a855f7 !important;
        }

        .lvl-c1 {
            border-left: 8px solid #f97316 !important;
        }

        .lvl-c2 {
            border-left: 8px solid #ef4444 !important;
        }

        /* Verb selector button styling */
        .active-verb {
            background: #4f46e5 !important;
            color: white !important;
            border-color: #4f46e5 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-4 md:p-8 text-slate-900 font-sans">

<div class="max-w-2xl mx-auto">
    <header class="mb-10">
        <a href="/"
           class="text-xs font-bold text-slate-400 hover:text-indigo-600 transition-colors uppercase tracking-widest">‚Üê
            Back to Cards</a>
        <h1 class="text-4xl font-black text-slate-800 tracking-tight italic mt-4">PHRASAL <span class="text-indigo-600">VERBS</span>
        </h1>
        <p class="text-slate-500 text-sm mt-2">Explore verbs by their root component</p>
    </header>

    <div id="verbSelector" class="flex flex-wrap gap-2 mb-10 justify-center">
        <button onclick="loadPhrasal('Get')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Get
        </button>
        <button onclick="loadPhrasal('Take')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Take
        </button>
        <button onclick="loadPhrasal('Look')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Look
        </button>
        <button onclick="loadPhrasal('Put')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Put
        </button>
        <button onclick="loadPhrasal('Go')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Go
        </button>
        <button onclick="loadPhrasal('Bring')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Bring
        </button>
        <button onclick="loadPhrasal('Keep')"
                class="verb-btn px-6 py-2 rounded-xl border bg-white font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            Keep
        </button>
    </div>

    <div id="phrasalResultsCounter" class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6 text-center">
        Select a verb to start
    </div>

    <div id="phrasalList" class="space-y-4">
    </div>
</div>

<script>
    // FETCH PHRASAL VERBS FROM DATABASE
    async function loadPhrasal(root) {
        // Toggle active button style
        document.querySelectorAll('.verb-btn').forEach(btn => {
            btn.classList.toggle('active-verb', btn.innerText === root);
        });

        const response = await fetch(`/words/phrasal/${root}`);
        const words = await response.json();
        const list = document.getElementById('phrasalList');
        const counter = document.getElementById('phrasalResultsCounter');

        list.innerHTML = '';
        counter.innerText = `Found ${words.length} variants for "${root}"`;

        words.forEach(word => {
            // USING THE SHARED RENDERER
            list.insertAdjacentHTML('beforeend', renderWordCard(word));
        });
    }

    // Initialize voices
    window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
</script>
</body>
</html>